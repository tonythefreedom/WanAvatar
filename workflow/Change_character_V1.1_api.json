{
  "95": {
    "class_type": "SetNode",
    "inputs": {
      "AUDIO": [
        "114",
        2
      ],
      "value": "audio"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "19": {
    "class_type": "SetNode",
    "inputs": {
      "INT": [
        "123",
        0
      ],
      "value": "Video width"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "20": {
    "class_type": "SetNode",
    "inputs": {
      "INT": [
        "124",
        0
      ],
      "value": "Video height"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "123": {
    "class_type": "Int",
    "inputs": {
      "value": 720
    },
    "_meta": {
      "title": "Int"
    }
  },
  "124": {
    "class_type": "Int",
    "inputs": {
      "value": 1280
    },
    "_meta": {
      "title": "Int"
    }
  },
  "125": {
    "class_type": "Note",
    "inputs": {
      "text": "Set the video width and height to values that are multiples of 16."
    },
    "_meta": {
      "title": "Note"
    }
  },
  "127": {
    "class_type": "OnnxDetectionModelLoader",
    "inputs": {
      "vitpose_model": "vitpose-l-wholebody.onnx",
      "yolo_model": "yolov10m.onnx",
      "onnx_device": "CUDAExecutionProvider"
    },
    "_meta": {
      "title": "OnnxDetectionModelLoader"
    }
  },
  "126": {
    "class_type": "PoseAndFaceDetection",
    "inputs": {
      "width": [
        "50",
        0
      ],
      "height": [
        "51",
        0
      ],
      "model": [
        "127",
        0
      ],
      "images": [
        "81",
        0
      ]
    },
    "_meta": {
      "title": "PoseAndFaceDetection"
    }
  },
  "51": {
    "class_type": "GetNode",
    "inputs": {
      "value": "Video height"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "50": {
    "class_type": "GetNode",
    "inputs": {
      "value": "Video width"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "48": {
    "class_type": "SetNode",
    "inputs": {
      "IMAGE": [
        "81",
        0
      ],
      "value": "input_video"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "104": {
    "class_type": "GroundingDinoModelLoader (segment anything)",
    "inputs": {
      "model_name": "GroundingDINO_SwinT_OGC (694MB)"
    },
    "_meta": {
      "title": "GroundingDinoModelLoader (segment anything)"
    }
  },
  "105": {
    "class_type": "SAMModelLoader (segment anything)",
    "inputs": {
      "model_name": "sam_vit_h (2.56GB)"
    },
    "_meta": {
      "title": "SAMModelLoader (segment anything)"
    }
  },
  "59": {
    "class_type": "GroundingDinoSAMSegment (segment anything)",
    "inputs": {
      "prompt": "person",
      "threshold": 0.25,
      "sam_model": [
        "105",
        0
      ],
      "grounding_dino_model": [
        "104",
        0
      ],
      "image": [
        "110",
        0
      ]
    },
    "_meta": {
      "title": "GroundingDinoSAMSegment (segment anything)"
    }
  },
  "110": {
    "class_type": "GetNode",
    "inputs": {
      "value": "input_video"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "82": {
    "class_type": "PreviewImage",
    "inputs": {
      "images": [
        "86",
        0
      ]
    },
    "_meta": {
      "title": "PreviewImage"
    }
  },
  "145": {
    "class_type": "Note",
    "inputs": {
      "text": "Load the reference image"
    },
    "_meta": {
      "title": "Note"
    }
  },
  "146": {
    "class_type": "Note",
    "inputs": {
      "text": "Load the reference video"
    },
    "_meta": {
      "title": "Note"
    }
  },
  "96": {
    "class_type": "VHS_VideoInfoLoaded",
    "inputs": {
      "video_info": [
        "114",
        3
      ]
    },
    "_meta": {
      "title": "VHS_VideoInfoLoaded"
    }
  },
  "49": {
    "class_type": "SetNode",
    "inputs": {
      "FLOAT": [
        "96",
        0
      ],
      "value": "original_fps"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "164": {
    "class_type": "easy showAnything",
    "inputs": {
      "anything": [
        "49",
        0
      ]
    },
    "_meta": {
      "title": "easy showAnything"
    }
  },
  "81": {
    "class_type": "ImageResizeKJv2",
    "inputs": {
      "width": [
        "50",
        0
      ],
      "height": [
        "51",
        0
      ],
      "upscale_method": "lanczos",
      "keep_proportion": "pad",
      "pad_color": "0, 0, 0",
      "crop_position": "center",
      "divisible_by": 16,
      "device": "cpu",
      "image": [
        "114",
        0
      ]
    },
    "_meta": {
      "title": "ImageResizeKJv2"
    }
  },
  "130": {
    "class_type": "DrawViTPose",
    "inputs": {
      "width": [
        "50",
        0
      ],
      "height": [
        "51",
        0
      ],
      "retarget_padding": 16,
      "body_stick_width": -1,
      "hand_stick_width": -1,
      "draw_head": "True",
      "pose_data": [
        "126",
        0
      ]
    },
    "_meta": {
      "title": "DrawViTPose"
    }
  },
  "206": {
    "class_type": "WanVideoTorchCompileSettings",
    "inputs": {
      "backend": "inductor",
      "fullgraph": false,
      "mode": "reduce-overhead",
      "dynamic": false,
      "dynamo_cache_size_limit": 64,
      "compile_transformer_blocks_only": true,
      "dynamo_recompile_limit": 128
    },
    "_meta": {
      "title": "WanVideoTorchCompileSettings"
    }
  },
  "122": {
    "class_type": "Note",
    "inputs": {
      "text": "If you get a Torch error when using this locally, please ignore this node. Also, please ignore this node when using it online."
    },
    "_meta": {
      "title": "Note"
    }
  },
  "170": {
    "class_type": "Note",
    "inputs": {
      "text": "If you get an 'out of memory' error, enable this node. It can help reduce the pressure on your VRAM. Its maximum value is 40."
    },
    "_meta": {
      "title": "Note"
    }
  },
  "211": {
    "class_type": "SetNode",
    "inputs": {
      "WANVIDEOMODEL": [
        "205",
        0
      ],
      "value": "Model"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "212": {
    "class_type": "SetNode",
    "inputs": {
      "WANVAE": [
        "210",
        0
      ],
      "value": "VAE"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "210": {
    "class_type": "WanVideoVAELoader",
    "inputs": {
      "model_name": "Wan2_1_VAE_fp32.safetensors",
      "precision": "fp32"
    },
    "_meta": {
      "title": "WanVideoVAELoader"
    }
  },
  "207": {
    "class_type": "WanVideoBlockSwap",
    "inputs": {
      "blocks_to_swap": 0,
      "offload_img_emb": false,
      "offload_txt_emb": false,
      "vace_blocks_to_swap": 0
    },
    "_meta": {
      "title": "WanVideoBlockSwap"
    }
  },
  "205": {
    "class_type": "WanVideoModelLoader",
    "inputs": {
      "model": "Wan22Animate/wan2.2_animate_14B_bf16.safetensors",
      "base_precision": "bf16",
      "quantization": "fp8_e4m3fn",
      "load_device": "offload_device",
      "attention_mode": "sageattn",
      "rms_norm_function": "pytorch",
      "block_swap_args": [
        "207",
        0
      ],
      "lora": [
        "208",
        0
      ]
    },
    "_meta": {
      "title": "WanVideoModelLoader"
    }
  },
  "208": {
    "class_type": "WanVideoLoraSelectMulti",
    "inputs": {
      "lora_0": "lightx2v_elite_it2v_animate_face.safetensors",
      "strength_0": 1.0,
      "lora_1": "WAN22_MoCap_fullbodyCOPY_ED.safetensors",
      "strength_1": 0.4000000000000001,
      "lora_2": "Wan2.2-Fun-A14B-InP-Fusion-Elite.safetensors",
      "strength_2": 0.6500000000000001,
      "lora_3": "FullDynamic_Ultimate_Fusion_Elite.safetensors",
      "strength_3": 0.7000000000000002,
      "lora_4": "WanAnimate_relight_lora_fp16.safetensors",
      "strength_4": 0.5,
      "low_mem_load": false,
      "merge_loras": true
    },
    "_meta": {
      "title": "WanVideoLoraSelectMulti"
    }
  },
  "213": {
    "class_type": "SetNode",
    "inputs": {
      "WANVIDEOTEXTEMBEDS": [
        "209",
        0
      ],
      "value": "text embeds"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "209": {
    "class_type": "WanVideoTextEncodeCached",
    "inputs": {
      "model_name": "models_t5_umt5-xxl-enc-bf16_fully_uncensored.safetensors",
      "precision": "bf16",
      "positive_prompt": "Natural soft lighting, the character is dancing in the room, distinct cast shadow on the floor beneath the person, gentle ambient light",
      "negative_prompt": "\u8272\u8c03\u8273\u4e3d\uff0c\u8fc7\u66dd\uff0c\u9759\u6001\uff0c\u7ec6\u8282\u6a21\u7cca\u4e0d\u6e05\uff0c\u5b57\u5e55\uff0c\u98ce\u683c\uff0c\u4f5c\u54c1\uff0c\u753b\u4f5c\uff0c\u753b\u9762\uff0c\u9759\u6b62\uff0c\u6574\u4f53\u53d1\u7070\uff0c\u6700\u5dee\u8d28\u91cf\uff0c\u4f4e\u8d28\u91cf\uff0cJPEG\u538b\u7f29\u6b8b\u7559\uff0c\u4e11\u964b\u7684\uff0c\u6b8b\u7f3a\u7684\uff0c\u591a\u4f59\u7684\u624b\u6307\uff0c\u753b\u5f97\u4e0d\u597d\u7684\u624b\u90e8\uff0c\u753b\u5f97\u4e0d\u597d\u7684\u8138\u90e8\uff0c\u7578\u5f62\u7684\uff0c\u6bc1\u5bb9\u7684\uff0c\u5f62\u6001\u7578\u5f62\u7684\u80a2\u4f53\uff0c\u624b\u6307\u878d\u5408\uff0c\u9759\u6b62\u4e0d\u52a8\u7684\u753b\u9762\uff0c\u6742\u4e71\u7684\u80cc\u666f\uff0c\u4e09\u6761\u817f\uff0c\u80cc\u666f\u4eba\u5f88\u591a\uff0c\u5012\u7740\u8d70",
      "quantization": "disabled",
      "use_disk_cache": false,
      "device": "gpu"
    },
    "_meta": {
      "title": "WanVideoTextEncodeCached"
    }
  },
  "14": {
    "class_type": "BlockifyMask",
    "inputs": {
      "block_size": 32,
      "masks": [
        "13",
        0
      ]
    },
    "_meta": {
      "title": "BlockifyMask"
    }
  },
  "15": {
    "class_type": "DrawMaskOnImage",
    "inputs": {
      "color": "0, 0, 0",
      "image": [
        "110",
        0
      ],
      "mask": [
        "14",
        0
      ]
    },
    "_meta": {
      "title": "DrawMaskOnImage"
    }
  },
  "13": {
    "class_type": "GrowMask",
    "inputs": {
      "expand": 35,
      "tapered_corners": true,
      "mask": [
        "215",
        0
      ]
    },
    "_meta": {
      "title": "GrowMask"
    }
  },
  "215": {
    "class_type": "easy clearCacheAll",
    "inputs": {
      "anything": [
        "214",
        0
      ]
    },
    "_meta": {
      "title": "easy clearCacheAll"
    }
  },
  "60": {
    "class_type": "SetNode",
    "inputs": {
      "MASK": [
        "14",
        0
      ],
      "value": "character_mask"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "214": {
    "class_type": "easy cleanGpuUsed",
    "inputs": {
      "anything": [
        "59",
        1
      ]
    },
    "_meta": {
      "title": "easy cleanGpuUsed"
    }
  },
  "144": {
    "class_type": "LayerUtility: ImageScaleByAspectRatio V2",
    "inputs": {
      "aspect_ratio": "original",
      "proportional_width": 1,
      "proportional_height": 1,
      "fit": "letterbox",
      "method": "lanczos",
      "round_to_multiple": "16",
      "scale_to_side": "longest",
      "scale_to_length": 1536,
      "background_color": "#000000",
      "image": [
        "91",
        0
      ]
    },
    "_meta": {
      "title": "LayerUtility: ImageScaleByAspectRatio V2"
    }
  },
  "86": {
    "class_type": "SetNode",
    "inputs": {
      "IMAGE": [
        "144",
        0
      ],
      "value": "reference_image"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "102": {
    "class_type": "CLIPVisionLoader",
    "inputs": {
      "clip_name": "clip_vision_h.safetensors"
    },
    "_meta": {
      "title": "CLIPVisionLoader"
    }
  },
  "221": {
    "class_type": "WanVideoClipVisionEncode",
    "inputs": {
      "strength_1": 1,
      "strength_2": 1,
      "crop": "center",
      "combine_embeds": "average",
      "force_offload": true,
      "tiles": 0,
      "ratio": 0.5,
      "clip_vision": [
        "102",
        0
      ],
      "image_1": [
        "144",
        0
      ]
    },
    "_meta": {
      "title": "WanVideoClipVisionEncode"
    }
  },
  "223": {
    "class_type": "SetNode",
    "inputs": {
      "WANVIDIMAGE_CLIPEMBEDS": [
        "221",
        0
      ],
      "value": "clip_embeds"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "21": {
    "class_type": "SetNode",
    "inputs": {
      "IMAGE": [
        "130",
        0
      ],
      "value": "pose_images"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "22": {
    "class_type": "SetNode",
    "inputs": {
      "IMAGE": [
        "126",
        1
      ],
      "value": "face_images"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "61": {
    "class_type": "SetNode",
    "inputs": {
      "IMAGE": [
        "15",
        0
      ],
      "value": "background_images"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "77": {
    "class_type": "easy showAnything",
    "inputs": {
      "anything": [
        "96",
        1
      ]
    },
    "_meta": {
      "title": "easy showAnything"
    }
  },
  "133": {
    "class_type": "SetNode",
    "inputs": {
      "INT": [
        "96",
        1
      ],
      "value": "frame count"
    },
    "_meta": {
      "title": "SetNode"
    }
  },
  "225": {
    "class_type": "GetNode",
    "inputs": {
      "value": "reference_image"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "224": {
    "class_type": "GetNode",
    "inputs": {
      "value": "clip_embeds"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "219": {
    "class_type": "GetNode",
    "inputs": {
      "value": "VAE"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "227": {
    "class_type": "GetNode",
    "inputs": {
      "value": "face_images"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "226": {
    "class_type": "GetNode",
    "inputs": {
      "value": "pose_images"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "228": {
    "class_type": "GetNode",
    "inputs": {
      "value": "background_images"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "229": {
    "class_type": "GetNode",
    "inputs": {
      "value": "character_mask"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "231": {
    "class_type": "GetNode",
    "inputs": {
      "value": "Video width"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "232": {
    "class_type": "GetNode",
    "inputs": {
      "value": "Video height"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "233": {
    "class_type": "GetNode",
    "inputs": {
      "value": "frame count"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "230": {
    "class_type": "GetNode",
    "inputs": {
      "value": "Model"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "235": {
    "class_type": "GetNode",
    "inputs": {
      "value": "text embeds"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "236": {
    "class_type": "easy cleanGpuUsed",
    "inputs": {
      "anything": [
        "234",
        0
      ]
    },
    "_meta": {
      "title": "easy cleanGpuUsed"
    }
  },
  "240": {
    "class_type": "GetNode",
    "inputs": {
      "value": "audio"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "241": {
    "class_type": "GetNode",
    "inputs": {
      "value": "original_fps"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "237": {
    "class_type": "easy clearCacheAll",
    "inputs": {
      "anything": [
        "236",
        0
      ]
    },
    "_meta": {
      "title": "easy clearCacheAll"
    }
  },
  "249": {
    "class_type": "GetNode",
    "inputs": {
      "value": "VAE"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "238": {
    "class_type": "WanVideoDecode",
    "inputs": {
      "enable_vae_tiling": true,
      "tile_x": 96,
      "tile_y": 96,
      "tile_stride_x": 48,
      "tile_stride_y": 48,
      "normalization": "default",
      "vae": [
        "249",
        0
      ],
      "samples": [
        "237",
        0
      ]
    },
    "_meta": {
      "title": "WanVideoDecode"
    }
  },
  "114": {
    "class_type": "VHS_LoadVideo",
    "inputs": {
      "video": "b32a38983a954b00006d8e2d92ad44df13fae58d528dadfbf2e0d7ff979b2f6f.mp4",
      "force_rate": 0,
      "force_size": "Disabled",
      "custom_width": 0,
      "custom_height": 0,
      "frame_load_cap": 481,
      "skip_first_frames": 0,
      "select_every_nth": 1,
      "format": "Wan",
      "choose video to upload": "image"
    },
    "_meta": {
      "title": "VHS_LoadVideo"
    }
  },
  "16": {
    "class_type": "PreviewImage",
    "inputs": {
      "images": [
        "61",
        0
      ]
    },
    "_meta": {
      "title": "PreviewImage"
    }
  },
  "252": {
    "class_type": "Note",
    "inputs": {
      "text": "If you just want the pose and don't need the background, you can skip this group."
    },
    "_meta": {
      "title": "Note"
    }
  },
  "246": {
    "class_type": "GetNode",
    "inputs": {
      "value": "frame count"
    },
    "_meta": {
      "title": "GetNode"
    }
  },
  "247": {
    "class_type": "easy mathInt",
    "inputs": {
      "a": [
        "246",
        0
      ],
      "b": 1,
      "operation": "subtract"
    },
    "_meta": {
      "title": "easy mathInt"
    }
  },
  "239": {
    "class_type": "VHS_VideoCombine",
    "inputs": {
      "frame_rate": 16,
      "loop_count": 0,
      "filename_prefix": "AnimateDiff",
      "format": "video/h264-mp4",
      "pix_fmt": "yuv420p",
      "crf": 15,
      "save_metadata": true,
      "trim_to_audio": false,
      "pingpong": false,
      "save_output": false,
      "no_preview": false,
      "images": [
        "245",
        0
      ],
      "audio": [
        "240",
        0
      ]
    },
    "_meta": {
      "title": "VHS_VideoCombine"
    }
  },
  "234": {
    "class_type": "WanVideoSampler",
    "inputs": {
      "steps": 20,
      "cfg": 1.0000000000000002,
      "shift": 8.000000000000002,
      "seed": 39397516397036,
      "force_offload": true,
      "scheduler": "euler",
      "riflex_freq_index": 0,
      "denoise_strength": 1,
      "batched_cfg": false,
      "rope_function": "comfy",
      "start_step": 0,
      "end_step": -1,
      "add_noise_to_samples": false,
      "model": [
        "230",
        0
      ],
      "image_embeds": [
        "218",
        0
      ],
      "text_embeds": [
        "235",
        0
      ],
      "cache_args": [
        "260",
        0
      ]
    },
    "_meta": {
      "title": "WanVideoSampler"
    }
  },
  "91": {
    "class_type": "LoadImage",
    "inputs": {
      "image": "05189dc7c4d5e07a8948a0fd06ae88f7c299d542064be7741e340c110f55a56a.png",
      "upload": "image"
    },
    "_meta": {
      "title": "LoadImage"
    }
  },
  "245": {
    "class_type": "GetImageRangeFromBatch",
    "inputs": {
      "start_index": 0,
      "num_frames": [
        "247",
        0
      ],
      "images": [
        "238",
        0
      ]
    },
    "_meta": {
      "title": "GetImageRangeFromBatch"
    }
  },
  "218": {
    "class_type": "WanVideoAnimateEmbeds",
    "inputs": {
      "width": [
        "231",
        0
      ],
      "height": [
        "232",
        0
      ],
      "num_frames": [
        "233",
        0
      ],
      "force_offload": true,
      "frame_window_size": 77,
      "colormatch": "disabled",
      "pose_strength": 0.85,
      "face_strength": 1,
      "tiled_vae": true,
      "vae": [
        "219",
        0
      ],
      "clip_embeds": [
        "224",
        0
      ],
      "ref_images": [
        "225",
        0
      ],
      "pose_images": [
        "226",
        0
      ],
      "face_images": [
        "227",
        0
      ],
      "bg_images": [
        "228",
        0
      ],
      "mask": [
        "229",
        0
      ]
    },
    "_meta": {
      "title": "WanVideoAnimateEmbeds"
    }
  },
  "257": {
    "class_type": "Fast Groups Bypasser (rgthree)",
    "inputs": {},
    "_meta": {
      "title": "Fast Groups Bypasser (rgthree)"
    }
  },
  "260": {
    "class_type": "WanVideoTeaCache",
    "inputs": {
      "rel_l1_thresh": 0.08,
      "start_step": 1,
      "end_step": -1,
      "cache_device": "offload_device",
      "use_coefficients": true
    },
    "_meta": {
      "title": "TeaCache (Speed Optimization)"
    }
  }
}